<style>
    .margin-top-20px{
        margin-top: 20px;
    }
    .margin-top-10px{
        margin-top: 10px;
    }
    #due_date-error,#start_date-error{
        opacity: 10;
    }
    .dropdown-header {
        font-weight: 600;
        font-size: 14px;
    }
    .opt.dis {
        display: none;
    }

    .form-group.form-md-line-input .help-block
    {
        opacity: 10 !important;
    }

    .white-font
    {
        color: white !important;
    }
</style>



<%- include header %>

<section class="portlet light bordered">
    <div class="portlet-title">
        <div class="caption caption-subject"> <i class="icon-bubble font-dark hide"></i>ADD USER :   <span class="caption-subject font-hide bold uppercase"></span> </div>
    </div>
    <div class="portlet-body">
        <div class="row">
            <!-- Default form -->

            <form  class="login-form" name="addUser" method="post" action="/addNewUser">
                <div class="widget">
                    <div class="">
                        <div class="form-group form-md-line-input  col-md-6 margin-bottom-10">
                            <label class="control-label"><b>FirstName</b><span class="text-error">* &nbsp;</span></label>
                            <div class="controls"><input type="text" class="form-control" name="f_name" id="name" placeholder="Enter first name" value=""/><span id="projectNameErr"></span></div>
                        </div>
                        <div class="form-group form-md-line-input  col-md-6 margin-bottom-10">
                            <label class="control-label"><b>LastName</b><span class="text-error">* &nbsp;</span></label>
                            <div class="controls"><input type="text" class="form-control" name="l_name" id="name" placeholder="Enter last name" value=""/><span id="projectNameErr"></span></div>
                        </div>
                        <div class="form-group form-md-line-input  col-md-6 margin-bottom-10">
                            <label class="control-label"><b>Email</b><span class="text-error">* &nbsp;</span></label>
                            <div class="controls"><input type="text" class="form-control" name="email" id="email" placeholder="Enter email address" value=""/><span id="projectNameErr"></span></div>
                        </div>
                        <div class="form-group form-md-line-input  col-md-6 margin-bottom-10">
                            <label class="control-label"><b>D.O.B</b><span class="text-error">* &nbsp;</span></label>
                            <div class="controls"><input type="text" class="form-control" name="dob" id="dob" placeholder="Enter your birthdate" value=""/><span id="projectNameErr"></span></div>
                        </div>

                        <div class="col-md-12">
                            <div class="row">
                                <div class="form-group form-md-line-input  col-md-3 margin-bottom-10">
                                    <label class="control-label"><b>City</b><span class="text-error">* &nbsp;</span></label>
                                    <div class="controls"><input type="text" class="form-control " name="city" id="city" placeholder="Enter city" value="" /><span id="projectNameErr"></span></div>
                                </div>


                                <div class="form-group form-md-line-input  col-md-3 margin-bottom-10">
                                    <label class="control-label"><b>State</b><span class="text-error">* &nbsp;</span></label>
                                    <div class="controls"><input type="text" class="form-control" name="state" id="state" placeholder="Enter state" value=""/><span id="costErr"></span></div>
                                </div>

                                <div class="form-group form-md-line-input  col-md-3 margin-bottom-10">
                                    <label class="control-label"><b>Gender</b><span class="text-error">* &nbsp;</span></label>
                                    <div class="controls"><input type="text" class="form-control" name="Gender" id="gender" placeholder="Enter Gender" value=""/><span id="costErr"></span></div>
                                </div>

                                <!--<div class="form-group form-md-line-input col-md-6">-->
                                    <!--<div class="control-group">-->
                                        <!--<label class="control-label"><b>Gender </b></label>-->
                                        <!--<div class="controls">-->

                                            <!--<select class="form-control edited bs-select" data-live-search="true" id="services" name="services[]" multiple>-->

                                                <!--<option value="1">One Services</option>-->
                                                <!--<option value="2">Two Services</option>-->
                                                <!--<option value="3">Three Services</option>-->


                                            <!--</select>-->
                                        <!--</div>-->
                                    <!--</div>-->
                                <!--</div>-->

                            </div>
                        </div>


                        <div class="col-md-12">
                            <div class="row">
                                <div class="form-group form-md-line-input  col-md-4 margin-bottom-10">
                                    <label class="control-label"><b>Profile Image</b><span class="text-error">* &nbsp;</span></label>
                                    <div class="controls"><input class="input-group form-control form-control-inline" type="file" value="" name="image1" id="image1"/><span id="projectNameErr"></span></div>
                                </div>

                                <!--<div class="form-group form-md-line-input  col-md-4 margin-bottom-10">-->
                                    <!--<label class="control-label"><b>Image 2</b><span class="text-error">* &nbsp;</span></label>-->
                                    <!--<div class="controls"><input class="input-group form-control form-control-inline" type="file" value="" name="image2" id="image2"/><span id="projectNameErr"></span></div>-->
                                <!--</div>-->

                                <!--<div class="form-group form-md-line-input  col-md-4 margin-bottom-10">-->
                                    <!--<label class="control-label"><b>Image 3</b><span class="text-error">* &nbsp;</span></label>-->
                                    <!--<div class="controls"><input class="input-group form-control form-control-inline" type="file" value="" name="image3" id="image3"/><span id="projectNameErr"></span></div>-->
                                <!--</div>-->


                            </div>
                        </div>

                        <div class="col-md-12 text-right" style="margin-top:30px;">

                            <input type="hidden" class="form-control" id="city" name="city" placeholder="" value="">
                            <input type="hidden" class="form-control" id="latitude" name="latitude" placeholder="" value="">
                            <input type="hidden" class="form-control" id="longitude" name="longitude" placeholder="" value="">
                            <input type="hidden" class="form-control" id="zipcode" name="zipcode" placeholder="" value="">

                            <a class="" style="margin-top:5px;" title="Save" type="submit">
                                <button type="submit" class="btn btn-md green btn-outline margin-bottom-10 margin-right-10 ">Save</button></a>
                            <a href="/manageGym" class=" btn btn-md red btn-outline margin-bottom-10 margin-right-10 sort" lang=""> Cancel</a>
                        </div>
                    </div>

                </div>
            </form>


        </div>

    </div>
</section>

<%- include leftPanel %>


<script>

    $(document).ready(function()
    {

        var i=0;
        jQuery("input,textarea").on('keypress',function(e){
            //alert();
            if(jQuery(this).val().length < 1){
                if(e.which == 32){
                    //alert(e.which);
                    return false;
                }
            }
            else {
                if(e.which == 32){
                    if(i != 0){
                        return false;
                    }
                    i++;
                }
                else{
                    i=0;
                }
            }
        });

        $("form[name = 'addGym']").validate({
            errorElement: 'span', //default input error message container
            errorClass: 'help-block', // default input error message class
            focusInvalid: false, // do not focus the last invalid input
            rules: {
                name : {
                    required: true,
                },
                address : {
                    required: true,
                },
                hours_of_operation: {
                    required: true,
                },
                coins : {
                    required: true,
                },
                'services[]' : {
                    required: true,
                },
                /*
                image1 : {
                    required: true,
                },
                image2 : {
                    required: true,
                },
                image3 : {
                    required: true,
                }
                */
            },
            messages: {
                name:{
                    required: "Please enter name"
                },
                address : {
                    required: "Please enter address",
                },
                hours_of_operation : {
                    required: "Please enter hours of operation",
                },
                coins : {
                    required: "Please enter coins"
                },
                'services[]' : {
                    required: "Please select services"
                },
                image1 : {
                    required: "Please select image1"
                },
                image2 : {
                    required: "Please select image2"
                },
                image3 : {
                    required: "Please select image3"
                }
            },
            invalidHandler: function (event, validator) { //display error alert on form submit
                $('.alert-danger', $('.form-horizontal')).show();
            },
            highlight: function (element) { // hightlight error inputs
                $(element).closest('.form-group').addClass('has-error'); // set error class to the control group
            },
            onfocusout: function (element) {
                $(element).valid();
            },
            success: function (label) {
                label.closest('.form-group').removeClass('has-error');
                label.remove();
            },
            errorPlacement: function (error, element) {
                error.insertAfter(element.closest('.form-control'));
            },
            submitHandler: function (form) {
                form.submit();
            }
        });

    });


</script>


<script>
    var placeSearch, autocomplete;

    function initAutocomplete() {
        // Create the autocomplete object, restricting the search to geographical
        // location types.
        autocomplete = new google.maps.places.Autocomplete(
            /** @type {!HTMLInputElement} */(document.getElementById('address')),
            {types: ['geocode']});

        // When the user selects an address from the dropdown, populate the address
        // fields in the form.
        autocomplete.addListener('place_changed', fillInAddress);
    }

    function fillInAddress() {
        // Get the place details from the autocomplete object.
        var place = autocomplete.getPlace();

        var area, city, zipcode;
        $.each(place, function(k1,v1) {
            if (k1 == "address_components") {
                for (var i = 0; i < v1.length; i++) {
                    for (k2 in v1[i]) {
                        if (k2 == "types") {
                            var types = v1[i][k2];
                            if (types[0] =="sublocality_level_1") {
                                area = v1[i].long_name;
                                //alert ("area: " + area);
                            }
                            if (types[0] =="locality") {
                                city = v1[i].long_name;
                                //alert ("city: " + city);
                            }
                            if (types[0] =="postal_code") {
                                zipcode = v1[i].short_name;
                                //alert ("zipcode: " + zipcode);
                            }
                        }
                    }
                }
            }
        });



        $('#city').val(city);
        $('#zipcode').val(zipcode);
        $('#latitude').val(place.geometry.location.lat());
        $('#longitude').val(place.geometry.location.lng());

    }


</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDP76rTZusQqYFwVBTwkw_1fB1_a-IJJvs&libraries=places&callback=initAutocomplete" async defer></script>