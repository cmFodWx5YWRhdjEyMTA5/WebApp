<style>
    .margin-top-20px{
        margin-top: 20px;
    }
    .margin-top-10px{
        margin-top: 10px;
    }
    #due_date-error,#start_date-error{
        opacity: 10;
    }
    .dropdown-header {
        font-weight: 600;
        font-size: 14px;
    }
    .opt.dis {
        display: none;
    }

    .form-group.form-md-line-input .help-block
    {
        opacity: 10 !important;
    }
    .form-group.form-md-line-input .help-block
    {
        opacity: 1 !important;
    }

    .white-font
    {
        color: white !important;
    }

    .to
    {
        margin-top: 5px !important;
    }
</style>



<%- include header %>


<link href="../assets/global/plugins/bootstrap-timepicker/css/bootstrap-timepicker.min.css" rel="stylesheet" type="text/css" />

<section class="portlet light bordered">
    <div class="portlet-title">
        <div class="caption caption-subject"> <i class="icon-bubble font-dark hide"></i>ADD GYM :   <span class="caption-subject font-hide bold uppercase"></span> </div>
    </div>
    <div class="portlet-body">
        <div class="row">
            <!-- Default form -->

            <form  class="login-form" name="addGym" method="post" action="/addNewGym" enctype="multipart/form-data">
                <div class="widget">
                    <div class="">
                        <div class="form-group form-md-line-input  col-md-4 margin-bottom-10">
                            <label class="control-label"><b>Name</b><span class="text-error">* &nbsp;</span></label>
                            <div class="controls">
                                <input type="text" class="form-control" name="name" id="name" placeholder="Enter name" value=""/>
                                <span id="projectNameErr"></span>
                            </div>
                        </div>

                        <div class="form-group form-md-line-input  col-md-4 margin-bottom-10">
                            <label class="control-label"><b>Address</b><span class="text-error">* &nbsp;</span></label>
                            <div class="controls">
                                <input type="text" class="form-control" name="address" id="address" placeholder="Enter address" value=""/>
                                <span id="projectNameErr"></span>
                            </div>
                        </div>

                        <div class="form-group form-md-line-input col-md-4">
                            <div class="control-group">
                                <label class="control-label"><b>Services </b><span class="text-error">* &nbsp;</span></label>
                                <div class="controls">

                                    <select class="form-control edited bs-select" data-live-search="true" id="services" name="services[]" multiple>

                                        <% services.forEach(function(service){ %>
                                            <option value="<%= service%>"><%= service%></option>
                                        <% }) %>

                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-12">
                            <div class="row">
                                <div class="form-group form-md-line-input  col-md-4 margin-bottom-10">
                                    <label class="control-label"><b>Image 1</b><span class="text-error">* &nbsp;</span></label>
                                    <div class="controls">
                                        <input class="input-group form-control form-control-inline" type="file" value="" name="image1" id="image1"/>
                                        <span id="projectNameErr"></span>
                                    </div>
                                </div>

                                <div class="form-group form-md-line-input  col-md-4 margin-bottom-10">
                                    <label class="control-label"><b>Image 2</b></label>
                                    <div class="controls">
                                        <input class="input-group form-control form-control-inline" type="file" value="" name="image2" id="image2"/>
                                        <span id="projectNameErr"></span>
                                    </div>
                                </div>

                                <div class="form-group form-md-line-input  col-md-4 margin-bottom-10">
                                    <label class="control-label"><b>Image 3</b></label>
                                    <div class="controls">
                                        <input class="input-group form-control form-control-inline" type="file" value="" name="image3" id="image3"/>
                                        <span id="projectNameErr"></span>
                                    </div>
                                </div>


                            </div>

                        </div>

                        <div class="form-group form-md-line-input  col-md-4 margin-bottom-10">
                            <label class="control-label"><b>Gym Manager Username</b><span class="text-error">* &nbsp;</span></label>
                            <div class="controls"><input type="text" class="form-control" name="username" id="username" placeholder="Enter Username" value=""/><span id="projectNameErr"></span></div>
                        </div>

                        <div class="form-group form-md-line-input  col-md-4 margin-bottom-10">
                            <label class="control-label"><b>Gym Manager Email</b><span class="text-error">* &nbsp;</span></label>
                            <div class="controls"><input type="text" class="form-control" name="email" id="email" placeholder="Enter Email" value=""/><span id="projectNameErr"></span></div>
                        </div>

                        <div class="form-group form-md-line-input  col-md-4 margin-bottom-10">
                            <label class="control-label"><b>Gym Manager Password</b><span class="text-error">* &nbsp;</span></label>
                            <div class="controls"><input type="password" class="form-control" name="password" id="password" placeholder="Enter Password" value=""/><span id="projectNameErr"></span></div>
                        </div>

                        <div class="col-md-12">
                            <div class="row">
                                <div class="form-group form-md-line-input  col-md-6 margin-bottom-10">
                                    <label class="control-label"><b>Hours of Operation</b><span class="text-error">* &nbsp;</span></label>
                                    <!--Sunday Row-->
                                    <div class="row">
                                        <div class="form-group form-md-line-input  col-md-2 margin-bottom-10">
                                            <label class="control-label">Sunday</label>
                                        </div>
                                        <div id="sunRow">
                                        <div class="form-group form-md-line-input  col-md-3 margin-bottom-10">
                                            <input type="text" class="form-control timepicker timepicker_changed" data-format="hh:mm A" value="<%= from[0]%>" id="sunFrom" name="sunFrom">
                                        </div>
                                        <div class="form-group form-md-line-input  col-md-1 margin-bottom-10">
                                            <label class="control-label to">TO</label>
                                        </div>
                                        <div class="form-group form-md-line-input  col-md-3 margin-bottom-10">
                                            <input type="text" class="form-control timepicker timepicker_changed" data-format="hh:mm A" value="<%= to[0]%>" id="sunTo" name="sunTo">
                                        </div>
                                        </div>
                                        <div class="form-group form-md-line-input  col-md-2" style="margin-top: -3px;">
                                            <div class="mt-checkbox-list" >
                                                <label class="mt-checkbox">
                                                    Closed
                                                    <input type="checkbox" value="0" name="sunClosed" id="sunClosed"/>
                                                    <span></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group form-md-line-input  col-md-6 margin-bottom-10">
                                    <!--Monday Row-->
                                    <div class="row" style="margin-top: 25px !important;">
                                        <div class="form-group form-md-line-input  col-md-2 margin-bottom-10">
                                            <label class="control-label">Monday</label>
                                        </div>
                                        <div id="monRow">
                                            <div class="form-group form-md-line-input  col-md-3 margin-bottom-10">
                                                <input type="text" class="form-control timepicker timepicker_changed" data-format="hh:mm A" value="<%= from[0]%>" id="monFrom" name="monFrom">
                                            </div>
                                            <div class="form-group form-md-line-input  col-md-1 margin-bottom-10">
                                                <label class="control-label to">TO</label>
                                            </div>
                                            <div class="form-group form-md-line-input  col-md-3 margin-bottom-10">
                                                <input type="text" class="form-control timepicker timepicker_changed" data-format="hh:mm A" value="<%= to[0]%>" id="monTo" name="monTo">
                                            </div>
                                        </div>
                                        <div class="form-group form-md-line-input  col-md-2" style="margin-top: -3px;">
                                            <div class="mt-checkbox-list" >
                                                <label class="mt-checkbox">
                                                    Closed
                                                    <input type="checkbox" value="0" name="monClosed" id="monClosed"/>
                                                    <span></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-12" style="margin-top: -78px !important;">
                            <div class="row">
                                <div class="form-group form-md-line-input  col-md-6 margin-bottom-10">
                                    <!--Tuesday Row-->
                                    <div class="row"  style="margin-top: 25px !important;">
                                        <div class="form-group form-md-line-input  col-md-2 margin-bottom-10">
                                            <label class="control-label">Tuesday</label>
                                        </div>
                                        <div id="tueRow">
                                            <div class="form-group form-md-line-input  col-md-3 margin-bottom-10">
                                                <input type="text" class="form-control timepicker timepicker_changed" data-format="hh:mm A" value="<%= from[0]%>" id="tueFrom" name="tueFrom">
                                            </div>
                                            <div class="form-group form-md-line-input  col-md-1 margin-bottom-10">
                                                <label class="control-label to">TO</label>
                                            </div>
                                            <div class="form-group form-md-line-input  col-md-3 margin-bottom-10">
                                                <input type="text" class="form-control timepicker timepicker_changed" data-format="hh:mm A" value="<%= to[0]%>" id="tueTo" name="tueTo">
                                            </div>
                                        </div>
                                        <div class="form-group form-md-line-input  col-md-2" style="margin-top: -3px;">
                                            <div class="mt-checkbox-list" >
                                                <label class="mt-checkbox">
                                                    Closed
                                                    <input type="checkbox" value="0" name="tueClosed" id="tueClosed"/>
                                                    <span></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group form-md-line-input  col-md-6 margin-bottom-10">
                                    <!--Wednesday Row-->
                                    <div class="row" style="margin-top: 25px !important;">
                                        <div class="form-group form-md-line-input  col-md-2 margin-bottom-10">
                                            <label class="control-label">Wednesday</label>
                                        </div>
                                        <div id="wedRow">
                                        <div class="form-group form-md-line-input  col-md-3 margin-bottom-10">
                                            <input type="text" class="form-control timepicker timepicker_changed" data-format="hh:mm A" value="<%= from[0]%>" id="wedFrom" name="wedFrom">
                                        </div>
                                        <div class="form-group form-md-line-input  col-md-1 margin-bottom-10">
                                            <label class="control-label to">TO</label>
                                        </div>
                                        <div class="form-group form-md-line-input  col-md-3 margin-bottom-10">
                                            <input type="text" class="form-control timepicker timepicker_changed" data-format="hh:mm A" value="<%= to[0]%>" id="wedTo" name="wedTo">
                                        </div>
                                        </div>
                                        <div class="form-group form-md-line-input  col-md-2" style="margin-top: -3px;">
                                            <div class="mt-checkbox-list" >
                                                <label class="mt-checkbox">
                                                    Closed
                                                    <input type="checkbox" value="0" name="wedClosed" id="wedClosed"/>
                                                    <span></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12" style="margin-top: -78px !important;">
                            <div class="row">
                                <div class="form-group form-md-line-input  col-md-6 margin-bottom-10">
                                    <!--Thursday Row-->
                                    <div class="row" style="margin-top: 25px !important;">
                                        <div class="form-group form-md-line-input  col-md-2 margin-bottom-10">
                                            <label class="control-label">Thursday</label>
                                        </div>
                                        <div id="thuRow">
                                            <div class="form-group form-md-line-input  col-md-3 margin-bottom-10">
                                                <input type="text" class="form-control timepicker timepicker_changed" data-format="hh:mm A" value="<%= from[0]%>" id="thuFrom" name="thuFrom">
                                            </div>
                                            <div class="form-group form-md-line-input  col-md-1 margin-bottom-10">
                                                <label class="control-label to">TO</label>
                                            </div>
                                            <div class="form-group form-md-line-input  col-md-3 margin-bottom-10">
                                                <input type="text" class="form-control timepicker timepicker_changed" data-format="hh:mm A" value="<%= to[0]%>" id="thuTo" name="thuTo">
                                            </div>
                                        </div>
                                        <div class="form-group form-md-line-input  col-md-2" style="margin-top: -3px;">
                                            <div class="mt-checkbox-list" >
                                                <label class="mt-checkbox">
                                                    Closed
                                                    <input type="checkbox" value="0" name="thuClosed" id="thuClosed"/>
                                                    <span></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group form-md-line-input  col-md-6 margin-bottom-10">
                                    <!--Friday Row-->
                                    <div class="row"  style="margin-top: 25px !important;">
                                        <div class="form-group form-md-line-input  col-md-2 margin-bottom-10">
                                            <label class="control-label">Friday</label>
                                        </div>
                                        <div id="friRow">
                                            <div class="form-group form-md-line-input  col-md-3 margin-bottom-10">
                                                <input type="text" class="form-control timepicker timepicker_changed" data-format="hh:mm A" value="<%= from[0]%>" id="friFrom" name="friFrom">
                                            </div>
                                            <div class="form-group form-md-line-input  col-md-1 margin-bottom-10">
                                                <label class="control-label to">TO</label>
                                            </div>
                                            <div class="form-group form-md-line-input  col-md-3 margin-bottom-10">
                                                <input type="text" class="form-control timepicker timepicker_changed" data-format="hh:mm A" value="<%= to[0]%>" id="friTo" name="friTo">
                                            </div>
                                        </div>
                                        <div class="form-group form-md-line-input  col-md-2" style="margin-top: -3px;">
                                            <div class="mt-checkbox-list" >
                                                <label class="mt-checkbox">
                                                    Closed
                                                    <input type="checkbox" value="0" name="friClosed" id="friClosed"/>
                                                    <span></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12" style="margin-top: -78px !important;">
                            <!--Saturday Row-->
                            <div class="row">
                                <div class="form-group form-md-line-input  col-md-6 margin-bottom-10">
                                    <div class="row" style="margin-top: 25px !important;">
                                        <div class="form-group form-md-line-input  col-md-2 margin-bottom-10">
                                            <label class="control-label">Saturday</label>
                                        </div>
                                        <div id="satRow">
                                            <div class="form-group form-md-line-input  col-md-3 margin-bottom-10">
                                                <input type="text" class="form-control timepicker timepicker_changed" data-format="hh:mm A" value="<%= from[0]%>" id="satFrom" name="satFrom">
                                            </div>
                                            <div class="form-group form-md-line-input  col-md-1 margin-bottom-10">
                                                <label class="control-label to">TO</label>
                                            </div>
                                            <div class="form-group form-md-line-input  col-md-3 margin-bottom-10">
                                                <input type="text" class="form-control timepicker timepicker_changed" data-format="hh:mm A" value="<%= to[0]%>" id="satTo" name="satTo">
                                            </div>
                                        </div>
                                        <div class="form-group form-md-line-input  col-md-2" style="margin-top: -3px;">
                                            <div class="mt-checkbox-list" >
                                                <label class="mt-checkbox">
                                                    Closed
                                                    <input type="checkbox" value="0" name="satClosed" id="satClosed"/>
                                                    <span></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- <div class="form-group form-md-line-input  col-md-6 margin-bottom-10">
                            <label class="control-label"><b>PDF</b><span class="text-error">* &nbsp;</span></label>
                            <div class="controls mt-repeater">
                                <input class="input-group form-control form-control-inline" type="file" value="" name="pdf" id="pdf"/>
                                <span id="projectNameErr"></span>
                            </div>
                        </div> -->

                        <div class="form-group form-md-line-input  col-md-6 margin-bottom-10">
                            <label class="control-label"><b>Attach PDF</b></label>
                            <div class="form-group mt-repeater ">
                                <div data-repeater-list="group-b">
                                    <div data-repeater-item class="mt-repeater-item mt-overflow">
                                        <label class="control-label">Additional PDF</label>
                                        <div class="mt-repeater-cell">
                                            <input class="input-group form-control form-control-inline" type="file" value="" name="pdfAdd" id="pdfAdd" accept=".pdf"/>
                                            <span id="projectNameErr"></span>
                                            <a href="javascript:;" data-repeater-delete class="btn btn-danger mt-repeater-delete mt-repeater-del-right mt-repeater-btn-inline">
                                                <i class="fa fa-close"></i>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <a href="javascript:;" data-repeater-create class="btn btn-success mt-repeater-add">
                                    <i class="fa fa-plus"></i> Add new pdf
                                </a>
                            </div>
                        </div>

                        <div class="col-md-12 text-right" style="margin-top:30px;">

                            <input type="hidden" class="form-control" id="city" name="city" placeholder="" value="">
                            <input type="hidden" class="form-control" id="state" name="state" placeholder="" value="">
                            <input type="hidden" class="form-control" id="latitude" name="latitude" placeholder="" value="">
                            <input type="hidden" class="form-control" id="longitude" name="longitude" placeholder="" value="">
                            <input type="hidden" class="form-control" id="zipcode" name="zipcode" placeholder="" value="">
                            <input type="hidden" class="form-control" id="selected_services_value" name="selected_services_value" placeholder="" value="">
                            <input type="hidden" class="form-control" id="selected_hours_value" name="selected_hours_value" placeholder="" value="">
                            <input type="hidden" class="form-control" id="maxImageSize" name="maxImageSize" placeholder="" value="<%= maxImageSize%>">

                            <a class="" style="margin-top:5px;" title="Save" type="submit">
                                <button type="submit" class="btn m-b-xs w-xs btn-primary waves-effect">
                                    Save
                                </button>
                            </a>
                            <a href="/manageGym" class="btn m-b-xs w-xs btn-danger waves-effect sort" lang="">
                                Cancel
                            </a>
                        </div>
                    </div>

                </div>
            </form>


        </div>

    </div>
</section>

<%- include leftPanel %>


<script>

    var FormRepeater = function () {
        return {
            //main function to initiate the module
            init: function () {
                console.log("FormRepeater->init called...");
                $('.mt-repeater').each(function(){
                    console.log("mt-repeater each called...");

                    $(this).repeater({
                        show: function () {
                            $('#pdfAdd').each(function () {

                                console.log("this : ",$(this));

                                $(this).attr('id',$(this).attr('name'));
                                $(this).rules("add", {
                                    required: true,
                                    acceptPdf : true
                                });
                            });
                            $(this).slideDown();
                        },
                        hide: function (deleteElement) {
                            if(confirm('Are you sure you want to delete this element?')) {
                                $(this).slideUp(deleteElement);
                            }
                            //Single Entity Data
                        },
                        ready: function (setIndexes) {
                        }
                    });
                });
            }
        };
    }();

    $(document).ready(function()
    {
        // FormRepeater.init();

            // $('#pdfAdd').each(function () {
            //     $(this).attr('id',$(this).attr('name'));
            //     $(this).rules("add", {
            //         required: true
            //     });
            // });
        var i=0;
        jQuery("input,textarea").on('keypress',function(e){
            //alert();
            if(jQuery(this).val().length < 1){
                if(e.which == 32){
                    //alert(e.which);
                    return false;
                }
            }
            else {
                if(e.which == 32){
                    if(i != 0){
                        return false;
                    }
                    i++;
                }
                else{
                    i=0;
                }
            }
        });

        $("#sunClosed").click(function () {
            if ($(this).is(":checked")) {
                $(this).val('1');
                $("#sunRow").hide();
            } else {
                $(this).val('0');
                $("#sunRow").show();
            }
        });

        $("#monClosed").click(function () {
            if ($(this).is(":checked")) {
                $(this).val('1');
                $("#monRow").hide();
            } else {
                $(this).val('0');
                $("#monRow").show();
            }
        });

        $("#tueClosed").click(function () {
            if ($(this).is(":checked")) {
                $(this).val('1');
                $("#tueRow").hide();
            } else {
                $(this).val('0');
                $("#tueRow").show();
            }
        });

        $("#wedClosed").click(function () {
            if ($(this).is(":checked")) {
                $(this).val('1');
                $("#wedRow").hide();
            } else {
                $(this).val('0');
                $("#wedRow").show();
            }
        });

        $("#thuClosed").click(function () {
            if ($(this).is(":checked")) {
                $(this).val('1');
                $("#thuRow").hide();
            } else {
                $(this).val('0');
                $("#thuRow").show();
            }
        });

        $("#friClosed").click(function () {
            if ($(this).is(":checked")) {
                $(this).val('1');
                $("#friRow").hide();
            } else {
                $(this).val('0');
                $("#friRow").show();
            }
        });

        $("#satClosed").click(function () {
            if ($(this).is(":checked")) {
                $(this).val('1');
                $("#satRow").hide();
            } else {
                $(this).val('0');
                $("#satRow").show();
            }
        });

        $('#address').bind("cut copy paste",function(e) {
            e.preventDefault();
        });

        $('#address').on('keypress', function (event) {
            var regex = new RegExp("^[a-zA-Z0-9 ]+$");
            var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
            if (!regex.test(key)) {
                event.preventDefault();
                return false;
            }
        });

        jQuery.validator.addMethod("acceptImageTypes1", function (value, element) {
            //return this.optional(element) || (parseFloat(value) <= 12);
            var ext = $('#image1').val().split('.').pop().toLowerCase();
            if(ext)
            {
                if($.inArray(ext, ['gif','png','jpg','jpeg']) === -1) {
                    return false;
                }
                else{
                    return true;
                }
            }
            else{
                return true;
            }
        },"Selected File must be an image");

        jQuery.validator.addMethod("acceptImageTypes2", function (value, element) {
            //return this.optional(element) || (parseFloat(value) <= 12);
            var ext = $('#image2').val().split('.').pop().toLowerCase();
            if(ext)
            {
                if($.inArray(ext, ['gif','png','jpg','jpeg']) === -1) {
                    return false;
                }
                else{
                    return true;
                }
            }
            else{
                return true;
            }
        },"Selected File must be an image");

        jQuery.validator.addMethod("acceptImageTypes3", function (value, element) {
            //return this.optional(element) || (parseFloat(value) <= 12);
            var ext = $('#image3').val().split('.').pop().toLowerCase();
            if(ext)
            {
                if($.inArray(ext, ['gif','png','jpg','jpeg']) === -1) {
                    return false;
                }
                else{
                    return true;
                }
            }
            else{
                return true;
            }
        },"Selected File must be an image");

        jQuery.validator.addMethod("acceptPdf", function (value, element) {
            //return this.optional(element) || (parseFloat(value) <= 12);
            var ext = $('#pdfAdd').val().split('.').pop().toLowerCase();
            if(ext)
            {
                if($.inArray(ext, ['pdfAdd']) === -1) {
                    return false;
                }
                else{
                    return true;
                }
            }
            else{
                return true;
            }
        },"Selected File must be a pdf");

        var maxImageSizeVal = $('#maxImageSize').val();

        console.log("maxImageSizeVal add gym(admin): "+maxImageSizeVal);

        $.validator.addMethod(
            "maxfilesize",
            function (value, element) {
                if (this.optional(element) || ! element.files || ! element.files[0]) {
                    return true;
                } else {
                    return element.files[0].size <= 1024 * 1024 * 2;
                }
            },
            'The file size can not exceed '+maxImageSizeVal+'MB.'
        );

        $('.work_emp_name').each(function () {
            $(this).rules("add", {
                required: true
            });
        });

        $("form[name = 'addGym']").validate({
            errorElement: 'span', //default input error message container
            errorClass: 'help-block', // default input error message class
            focusInvalid: false, // do not focus the last invalid input
            rules: {
                name : {
                    required: true
                },
                address : {
                    required: true
                },
                'hours_of_operation[]': {
                    required: true
                },
                /*coins : {
                    required: true
                },*/
                'services[]' : {
                    required: true
                },
                image1 : {
                    required: true,
                    acceptImageTypes1 : true,
                    maxfilesize : true
                },
                image2 : {
                    // required: true
                    acceptImageTypes2 : true,
                    maxfilesize : true
                },
                image3 : {
                    // required: true
                    acceptImageTypes3 : true,
                    maxfilesize : true
                },
                // pdf : {
                //     required: true,
                //     acceptPdf : true,
                // },
                // pdfAdd : {
                //     required: true,
                //     acceptPdf : true,
                // },
                /*gymBarCode: {
                    required: true
                },*/
                username : {
                    required : true
                },
                email : {
                    required: true
                },
                password : {
                    required: true
                }
            },
            messages: {
                name:{
                    required: "Please enter name"
                },
                address : {
                    required: "Please enter address"
                },
                'hours_of_operation[]': {
                    required: "Please enter hours of operation"
                },
                /*coins : {
                    required: "Please enter coins"
                },*/
                'services[]' : {
                    required: "Please select services"
                },
                image1 : {
                    required: "Please select image1"
                },
                /*image2 : {
                    required: "Please select image2"
                },
                image3 : {
                    required: "Please select image3"
                },*/
                /*gymBarCode : {
                    required: "Please enter Barcode"
                },*/
                username : {
                    required : "Please enter username"
                },
                email : {
                    required: "Please enter email"
                },
                password : {
                    required: "Please enter password"
                }
            },
            invalidHandler: function (event, validator) { //display error alert on form submit
                $('.alert-danger', $('.form-horizontal')).show();
            },
            highlight: function (element) { // hightlight error inputs
                $(element).closest('.form-group').addClass('has-error'); // set error class to the control group
            },
            onfocusout: function (element) {
                $(element).valid();
            },
            success: function (label) {
                label.closest('.form-group').removeClass('has-error');
                label.remove();
            },
            errorPlacement: function (error, element) {
                error.insertAfter(element.closest('.form-control'));
            },
            submitHandler: function (form) {
                var servicesValues = [];
                $('#services :selected').each(function() {
                    console.log("submitHandler add gym : "+$(this).attr('value'));
                    servicesValues.push( $(this).attr('value') );
                });
                $("#selected_services_value").val(servicesValues);

                var hoursValues = [];
                $('#hours_of_operation :selected').each(function() {
                    console.log("submitHandler add gym : "+$(this).attr('value'));
                    hoursValues.push( $(this).attr('value') );
                });
                $("#selected_hours_value").val(hoursValues);

                var lat = $('#latitude').val();
                var long = $('#longitude').val();

                console.log("lat : "+lat+" ,long : "+long);

                if ((lat.length > 0) && (long.length > 0)) {
                    form.submit();
                }
                else {
                    $('#address').closest('.form-group').addClass('has-error');
                    $('#address').closest('.form-group').append('<span id="barcode-error" class="help-block">Please select address from google autocomplete.</span>');
                    return false;
                }
            }
        });

        $('.timepicker_changed').timepicker({
            autoclose: true,
            showSeconds: false,
            minuteStep: 30
        });
    });


</script>


<script>
    var placeSearch, autocomplete;

    function initAutocomplete() {
        // Create the autocomplete object, restricting the search to geographical
        // location types.
        autocomplete = new google.maps.places.Autocomplete(
            /** @type {!HTMLInputElement} */(document.getElementById('address')),
            {types: ['geocode']});

        // When the user selects an address from the dropdown, populate the address
        // fields in the form.
        autocomplete.addListener('place_changed', fillInAddress);
    }

    function fillInAddress() {
        // Get the place details from the autocomplete object.
        var place = autocomplete.getPlace();

        var area, city, zipcode, state;
        $.each(place, function(k1,v1) {
            if (k1 == "address_components") {
                for (var i = 0; i < v1.length; i++) {
                    for (k2 in v1[i]) {
                        if (k2 == "types") {
                            var types = v1[i][k2];
                            // console.log("types: " + types);
                            // console.log("v1[i]: " + v1[i].long_name);
                            if (types[0] =="sublocality_level_1") {
                                area = v1[i].long_name;
                                //alert ("area: " + area);
                            }
                            if (types[0] =="locality") {
                                city = v1[i].long_name;
                                //alert ("city: " + city);
                            }
                            if (types[0] =="postal_code") {
                                zipcode = v1[i].short_name;
                                //alert ("zipcode: " + zipcode);
                            }
                            if (types[0] =="administrative_area_level_1") {
                                state = v1[i].long_name;
                                //alert ("zipcode: " + zipcode);
                            }
                        }
                    }
                }
            }
        });

        $('#city').val(city);
        $('#state').val(state);
        $('#zipcode').val(zipcode);
        $('#latitude').val(place.geometry.location.lat());
        $('#longitude').val(place.geometry.location.lng());

    }


</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDP76rTZusQqYFwVBTwkw_1fB1_a-IJJvs&libraries=places&callback=initAutocomplete" async defer></script>

<script src="../assets/global/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js" type="text/javascript"></script>

